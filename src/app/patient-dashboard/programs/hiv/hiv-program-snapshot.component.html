<div class="wrapper">
  <h3>HIV Program Snapshot</h3>
  <hr />
  <div *ngIf="hasError">
    <p class="alert alert-error text-error">Error generating hiv program snapshot</p>
  </div>
  <div *ngIf="noData && !hasError">
    <p class="alert alert-warning">No patient data to generate hiv program snapshot</p>
  </div>
  <div *ngIf="!hasError && !noData">
    <table class="table table-striped">
      <thead>
      <tr>
        <th colspan="2" class="full-width"><span class="summary-label">Encounter Location:</span> {{location?.name}}</th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td><strong class="summary-label">Encounter Date:</strong> {{patientData?.encounter_datetime |
          date:'dd-MM-yyyy'}}
        </td>
        <td><strong class="summary-label">Encounter Type:</strong> {{patientData?.encounter_type_name ?
          patientData?.encounter_type_name : 'None' }}
        </td>
      </tr>
      <tr>
        <td><strong class="summary-label">RTC Date:</strong> {{patientData?.rtc_date | date:'dd-MM-yyyy'}}</td>
        <td>
          <strong class="summary-label">Last Viral Load:</strong> {{patientData?.vl_1 }} (<span>{{patientData?.vl_1_date | date:'dd-MM-yyyy'}}</span>)
          <p>
            <i style="font-size:smaller" class="text-muted" *ngIf="patientData?.isPendingViralLoad?.status">
              There is a Pending Viral Load Test Ordered on:
              <span
                [ngClass]="patientData?.isPendingViralLoad.status === true && patientData?.isPendingViralLoad.days>30?'text-danger':''">
                {{patientData?.vl_order_date | date:'dd-MM-yyyy'}}
              </span>
            </i>
          </p>
        </td>
      </tr>
      <tr>
        <td colspan="2" class="full-width"><strong class="summary-label">Current ARV Regimen:</strong> {{patientData?.cur_arv_meds}}</td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
